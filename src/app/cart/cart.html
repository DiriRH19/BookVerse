<app-nav></app-nav>
<main class="cart">
  <h2 class="cart__title">Tu Carrito</h2>
  @if (cartItems().length > 0) {
    <div class="cart__grid">
      @for (item of cartItems(); track item.id) {
        <div class="cart__item">
          <div class="cart__image">
            <img [src]="item.image" [alt]="item.title" />
          </div>
          <div class="cart__details">
            <h3 class="cart__title-item">{{ item.title }}</h3>
            <p class="cart__author">{{ item.author }}</p>
            <p class="cart__price">Precio: ${{ item.price || 0 }}</p>
            <p class="cart__rating">⭐ {{ item.rating }}</p>
            <div class="cart__quantity">
              <label>Cantidad:</label>
              <input 
                type="number" 
                [value]="item.quantity || 1" 
                min="1" 
                (change)="updateQuantity(item.id, +$event.target.value)"
                class="cart__quantity-input"
              />
            </div>
            <button type="button" class="cart__remove" (click)="removeFromCart(item.id)">
              Eliminar
            </button>
            <button type="button" class="buy-btn" (click)="buySingleItem(item.id)">
              {{ item.quantity > 1 ? 'Comprar estos productos' : 'Comprar este producto' }}
            </button>
          </div>
        </div>
      }
    </div>
    <div class="cart__total">
      <h3>Total: ${{ getTotal() }}</h3>
      <button type="button" class="cart__checkout" (click)="completePurchase()">
        Comprar todo
      </button>
    </div>
  } @else {
    <p class="cart__empty">Tu carrito está vacío.</p>
  }
</main>
<app-footer></app-footer>
